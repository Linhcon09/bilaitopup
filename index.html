<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>BilaiTopUp: Free Fire Diamond Top Up Website for Bangladesh</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<!-- Styles -->
<link rel="stylesheet" href="style.css">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
<script src="firebase-config.js"></script>
</head>

<body>

<header class="header">
  <div class="nav-left">
    <img src="logo.png" alt="Logo" class="logo">
    <span class="brand">BilaiTopUp</span>
  </div>
  <nav class="nav-right">
    <a href="account.html">ржЖржорж╛рж░ ржПржХрж╛ржЙржирзНржЯ</a>
    <a href="faq.html">FAQ</a>
    <a href="privacy.html">Privacy Policy</a>
    <a href="https://wa.me/01963178893" target="_blank">ЁЯТм Support</a>
    <button onclick="logout()" class="logout-btn">ЁЯЪк Logout</button>
  </nav>
</header>

<main class="container">
  <!-- Packages -->
  <section class="packages-section">
    <h1>ЁЯТО ржбрж╛рзЯржоржирзНржб ржкрзНржпрж╛ржХрзЗржЬ</h1>
    <div id="packages" class="packages-grid"></div>
  </section>

  <!-- Payment -->
  <section class="payment-section">
    <h2>ЁЯУ▓ Payment Instructions</h2>
    <div class="instructions">
      <p>*247# ржбрж╛ржпрж╝рж╛рж▓ ржХрж░рзЗ ржЖржкржирж╛рж░ bKash ржорзЛржмрж╛ржЗрж▓ ржорзЗржирзБрждрзЗ ржпрж╛ржи ржЕржержмрж╛ bKash ржЕрзНржпрж╛ржкрзЗ ржпрж╛ржиред</p>
      <p>"Send Money" -ржП ржХрзНрж▓рж┐ржХ ржХрж░рзБржиред</p>
      <p>ржкрзНрж░рж╛ржкржХ ржиржорзНржмрж░: <strong id="bkashNumber">01829865733</strong></p>
      <p>ржЯрж╛ржХрж╛рж░ ржкрж░рж┐ржорж╛ржгржГ (ржЖржкржирж╛рж░ ржкрзНржпрж╛ржХрзЗржЬ ржЕржирзБржпрж╛ржпрж╝рзА ржЯрж╛ржХрж╛рж░ ржкрж░рж┐ржорж╛ржг)</p>
      <p>ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рждрзЗ ржЖржкржирж╛рж░ ржкрж┐ржи рж▓рж┐ржЦрзБржиред</p>
      <p>рж╕ржмржХрж┐ржЫрзБ ржарж┐ржХ ржерж╛ржХрж▓рзЗ bKash ржерзЗржХрзЗ ржПржХржЯрж┐ ржХржиржлрж╛рж░рзНржорзЗрж╢ржи ржмрж╛рж░рзНрждрж╛ ржкрж╛ржмрзЗржиред</p>
      <p>ржПржЦржи ржирж┐ржЪрзЗрж░ ржмржХрзНрж╕рзЗ Transaction ID ржжрж┐ржи ржПржмржВ VERIFY ржХрж░рзБржиред</p>
    </div>
    <div class="verify-box">
      <input type="text" id="transactionId" placeholder="Transaction ID рж▓рж┐ржЦрзБржи">
      <button id="verifyBtn" class="verify-btn">тЬЕ VERIFY</button>
    </div>
  </section>
</main>

<footer>
  <p>┬й 2025 BilaiTopUp | рж╕рж░рзНржмрж╕рзНржмрждрзНржм рж╕ржВрж░ржХрзНрж╖рж┐ржд</p>
</footer>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const auth = firebase.auth();
  const db = firebase.firestore();

  // Check if user is logged in
  auth.onAuthStateChanged(user => {
    if (!user) {
      window.location.href = "login.html";
    } else {
      loadPackages();
    }
  });

  async function loadPackages() {
    const div = document.getElementById("packages");
    if (!div) return;

    div.innerHTML = "";
    try {
      const snapshot = await db.collection("packages").orderBy("price").get();
      if (snapshot.empty) {
        div.innerHTML = "<p>ржХрзЛржирзЛ ржкрзНржпрж╛ржХрзЗржЬ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ржирж┐ред</p>";
        return;
      }

      snapshot.forEach(doc => {
        const p = doc.data();
        const card = document.createElement("div");
        card.className = "package-card";
        card.innerHTML = `
          <h3>${p.name}</h3>
          <p>${p.price} TK</p>
          <button onclick="orderPackage('${p.name}', ${p.price})">Order</button>
        `;
        div.appendChild(card);
      });
    } catch (err) {
      console.error("Failed to load packages:", err);
      div.innerHTML = "<p>ржкрзНржпрж╛ржХрзЗржЬ рж▓рзЛржб ржХрж░рждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗред ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред</p>";
    }
  }

  window.orderPackage = async (name, price) => {
    const user = auth.currentUser;
    if (!user) {
      alert("ржкрзНрж░ржержорзЗ рж▓ржЧржЗржи ржХрж░рзБржи!");
      return window.location.href = "login.html";
    }
    const tid = prompt("ржЖржкржирж╛рж░ Transaction ID рж▓рж┐ржЦрзБржи:");
    if (!tid) return alert("Transaction ID ржкрзНрж░ржпрж╝рзЛржЬржи!");

    try {
      await db.collection("orders").add({
        uid: user.uid,
        packageName: name,
        price: Number(price),
        transactionId: tid,
        status: "Pending",
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      });
      alert("тЬЕ ржЖржкржирж╛рж░ ржЕрж░рзНржбрж╛рж░ рж╕рж╛ржмржорж┐ржЯ рж╣ржпрж╝рзЗржЫрзЗ! Status: Pending");
    } catch (err) {
      console.error("Order submit failed:", err);
      alert("ржЕрж░рзНржбрж╛рж░ рж╕рж╛ржмржорж┐ржЯ ржХрж░рждрзЗ ржмрзНржпрж░рзНрже!");
    }
  };

  window.logout = () => {
    auth.signOut().then(() => window.location.href = "login.html")
      .catch(err => console.error("Logout failed:", err));
  };
});
</script>

</body>
  </html>
